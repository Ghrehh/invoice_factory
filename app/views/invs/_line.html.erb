<ul class="sortable">
  
<% @lines.each do |x| %>
  
  <li data-id="<%= x.id %>"> <!-- Nescessary for the sorting -->
  <div class="line line<%=x.id%>">
    
    <% unless x.service == "" %> <!-- will print the description is one is provided -->
      <p class="service-paragraph"><%= x.service %>:</p>
    <% end %>
    
    <p class="description-paragraph"><%= x.description %></p>
    <%= link_to 'X', x, :method => :delete, class: "delete-button", :remote => true %>
    <%= link_to 'edit', edit_line_path(x), class: "edit-button", :remote => true %>
    
    <% unless x.price.nil? %> <!-- will print the price is one is provided -->
      <p class="price-paragraph">||£<%= '%.2f' % x.price %>||</p>
    <% end %>
    
    <!--these are for debugging if the ordering breaks(<%= x.id %>||
    <%= x.position %>)-->
    
  </div>
  </li>

<% end %>

</ul>

<% if @inv.total == nil %> <!-- will display (custom) if the price is custom -->
  <p>Total: £ <%= @total %> </p>
<% else %>
  <p>Total(custom): £ <%= @total %></p>
<% end %>

<%= form_for [@inv], :remote => true do |f| %> <!-- form to change total -->

  <div class="form-container">
    <%= f.label "Custom Total" %>
    <%= f.text_field :total, class: "price", input_html: {autocomplete: 'off'} %>
  </div>
    
    
  <%= f.submit "Change", class: "line-button" %>
<% end %>


<script type="text/javascript"> //reapplies the sorting thing every time the partial is reloaded.
    ready();
</script>